jQuery(document).ready(function(a){var t=a("body");!function(){var t=a(".wp-post-image.lazyload");t.length&&t.lazyload({event:"scrollstop"}).removeClass("lazyload").addClass("lazyloaded")}(),function(){var t=fansub.ajax_url+"?action=fansub_search_autocomplete",e=a(".fansub-new-release.advanced-search .search-form .search-field, .fansub-box.fansub-release .search-form .search-field");e.length&&(e.autocomplete({source:t,delay:500,minLength:1,select:function(a,t){window.location.href=t.item.link}}).autocomplete("instance")._renderItem=function(t,e){return a("<li>").append(e.html).appendTo(t)})}(),function(){var t=a(".single-box .series-releases .video-box");if(t.length){var e=t.find(".module-body");e.addClass("ajax-loading"),a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_video_list",post_id:parseInt(t.attr("data-post-id")),jwplayer:0},success:function(s){if(e.removeClass("ajax-loading"),s.have_posts){e.html(s.html_data);var i=e,o=a(".fansub-new-release.single-box .video-box .fansub-post a.post-thumbnail, .fansub-new-release.single-box .video-box .fansub-post a.fancy-link");i.length&&i.bxSlider({slideWidth:260,minSlides:2,maxSlides:5,moveSlides:1,slideMargin:10}),t.find(".module-body").children(".fansub-post").each(function(){var t=a(this),e=parseInt(t.attr("data-jwplayer")),s=parseInt(t.attr("data-id"));1==e&&(t.addClass("ajax-loading"),a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_video_list",post_id:s,jwplayer:1},success:function(a){t.removeClass("ajax-loading");var e=t.find(".video-fancy-box");e.length&&a.has_data&&e.html(a.html_data),t.find("a.post-thumbnail, a.fancy-link").fancybox({autoScale:!0,padding:0,scrolling:"no",autoDimensions:!0,width:640,height:480,minHeight:480,maxHeight:480,maxWidth:"90%",minWidth:"80%"})}}))}),o.length&&o.each(function(){var t=a(this),e=t.closest(".fansub-post");e.hasClass("ajax-loading")||t.fancybox({autoScale:!0,padding:0,scrolling:"no",autoDimensions:!0,width:640,height:480,minHeight:480,maxHeight:480,maxWidth:"90%",minWidth:"80%"})})}}})}}(),function(){a(".anime-list .pagination.ajax .link-item").on("click",function(t){t.preventDefault();var e=a(this),s=parseInt(e.attr("data-paged")),i=e.closest(".pagination"),o=i.parent(),n=o.find(".pagination").not(i),r=i.find(".next-item"),l=i.find(".previous-item"),d=i.find('a[data-paged="1"]'),c=o.find("ul");a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_pagination",paged:s,query_vars:i.attr("data-query-vars")},success:function(a){if(0==s)d.trigger("click");else{var t=i.find("[data-paged='"+s+"']").not(".last-item, .next-item, .first-item, .previous-item"),o=n.find("[data-paged='"+s+"']").not(".last-item, .next-item, .first-item, .previous-item");i.find(".current-item").removeClass("current-item"),n.find(".current-item").removeClass("current-item"),a.have_posts?(c.html(a.html),e.hasClass("next-item")?e.attr("data-paged",s+1):e.hasClass("previous-item")?(1>s&&(s=2),e.attr("data-paged",s-1)):(r.attr("data-paged",s+1),l.attr("data-paged",s-1))):((e.hasClass("next-item")||e.hasClass("previous-item"))&&e.attr("data-paged",1),d.trigger("click")),t.addClass("current-item"),o.addClass("current-item");var h=c.find(".wp-post-image.lazyload");h.length&&h.lazyload({event:"scrollstop"}).removeClass("lazyload").addClass("lazyloaded")}}})})}(),function(){a(".fansub-new-release .quality-item .quality").live("click",function(t){t.preventDefault();var e=a(this),s=e.parent(),i=s.parent(),o=s.find(".list-servers"),n=e.closest(".fansub-post"),r=0;return e.hasClass("has-link")?(i.find(".quality-item").not(s).removeClass("current-quality").find(".list-servers").hide(),s.toggleClass("current-quality"),void(s.hasClass("current-quality")?(n.addClass("active"),o.slideDown(),r=o.height(),r>25?n.css({"margin-bottom":r+"px"}):(r=25,n.css({"margin-bottom":r+"px"}))):(o.hide(),n.removeClass("active"),n.css({"margin-bottom":"0"})))):!1})}(),function(){a(".fansub-new-release").each(function(t,e){var s=a(e);if(!s.hasClass("single-box")){var i=s.closest(".fansub-post");i.find(".entry-title").each(function(){var t=a(this);0==t.html().replace(/\s|&nbsp;/g,"").length&&t.parent().remove()})}})}(),function(){a(".fansub-new-release .search-form:not(.advanced-search-form)").on("submit",function(t){t.preventDefault();var e=a(this),s=e.find(".search-field"),i=s.val(),o=e.closest(".box-content"),n=o.find(".list-releases"),r=o.find(".query-vars"),l=e.find(".dashicons").not(".dashicons-lock"),d=o.find(".options-data");return n.fadeOut(),a.trim(i)?void a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_search_post",search:s.val(),query_vars:r.val(),options_data:d.val(),box_type:o.attr("data-type"),is_search:1},success:function(a){l.removeClass("dashicons-update"),l.addClass("dashicons-dismiss"),l.attr("title",l.attr("data-clear-text")),a.success?n.html(a.html):n.html(a.no_post_msg),r.val(a.query_vars),n.fadeIn()}}):(a(".fansub-new-release .search-form .refreshbutton").trigger("click"),!1)}),a(".fansub-new-release .search-form .refreshbutton").live("click",function(t){t.preventDefault();var e=a(this).closest(".search-form"),s=e.closest(".box-content"),i=s.find(".btn-more"),o=s.find(".dashicons").not(".dashicons-lock"),n=s.find(".search-field"),r=s.find(".list-releases"),l=s.find(".query-vars"),d=s.find(".default-query-vars"),c=d.val(),h=e.closest(".single-box"),p=0,u=s.find(".options-data");!o.hasClass("dashicons-dismiss"),h.length&&(p=1),r.fadeOut(),a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_search_post",default_query_vars:c,options_data:u.val(),refresh:1,box_type:s.attr("data-type"),single:p},success:function(a){o.hasClass("dashicons-dismiss")&&(o.removeClass("dashicons-dismiss"),o.addClass("dashicons-update"),o.attr("title",o.attr("data-refresh-text")),n.val("")),a.success&&r.html(a.html),l.val(l.attr("data-default")),r.fadeIn(),i.css({cursor:"pointer"}),i.removeClass("no-more-post"),i.html(i.attr("data-text"))}})}),a(".fansub-new-release .btn-more").live("click",function(t){t.preventDefault();var e=a(this),s=e.closest(".box-content"),i=s.find(".list-releases"),o=s.find(".query-vars"),n=s.find(".dashicons").not(".dashicons-lock"),r=s.find(".options-data");return e.hasClass("no-more-post")?!1:(e.html(e.attr("data-loading-text")),void a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_kntl_search_post",query_vars:o.val(),options_data:r.val(),box_type:s.attr("data-type"),load_more:1},success:function(a){a.have_posts&&(n.removeClass("dashicons-update"),n.addClass("dashicons-dismiss"),n.attr("title",n.attr("data-clear-text")),i.append(a.html)),o.val(a.query_vars),a.more_post?e.html(e.attr("data-text")):(e.addClass("no-more-post"),e.html(e.attr("data-reached-end-text")),e.css({cursor:"text"})),i.fadeIn()}}))})}(),function(){t.on("click",".server-item a",function(t){var e=a(this),s=e.closest(".list-servers"),i=s.find(".private-item");if(i.length)if(t.preventDefault(),i.hasClass("password-required")){var o=parseInt(i.attr("data-unlocked"));if(1!=o){if(e.hasClass("private-link")){var n=prompt("Enter password");a.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_ph_check_post_password",post_id:i.attr("data-id"),password:n},success:function(t){t.success?e.hasClass("private-link")?(i.attr("data-unlocked",1),e.find(".dashicons").addClass("dashicons-unlock")):window.open(e.attr("data-href"),"_blank"):a.trim(n)&&alert(t.message)}})}}else e.hasClass("private-link")||window.open(e.attr("data-href"),"_blank")}else alert("Private content")})}()});