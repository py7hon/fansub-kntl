if(window.wp=window.wp||{},window.fansub=window.fansub||{},"undefined"==typeof jQuery)throw new Error(fansub.i18n.jquery_undefined_error);jQuery(document).ready(function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error(fansub.i18n.jquery_version_error)}),fansub.media_frame=null,fansub.media_items={},jQuery(document).ready(function(t){"use strict";var e=t("body");fansub.getParamByName=function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=i.exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},fansub.receiveSelectedMediaItems=function(t){return t.state().get("selection")},fansub.receiveSelectedMediaItem=function(t){var e=fansub.receiveSelectedMediaItems(t);return e.first().toJSON()},fansub.isImageUrl=function(e){if(!t.trim(e))return!1;var i=!0,n=e.slice(-4);return".png"!=n&&".jpg"!=n&&".gif"!=n&&".bmp"!=n&&"jpeg"!=n&&".ico"!=n&&(i=!1),i},fansub.getTagName=function(t){return t.length?t.get(0).tagName:""},fansub.isUrl=function(t){var e=new RegExp("^(http://www.|https://www.|ftp://www.|www.){1}([0-9A-Za-z]+.)");return e.test(t)},fansub.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},fansub.getFirstMediaItemJSON=function(t){return t.first().toJSON()},fansub.createImageHTML=function(e){e=e||{};var i=e.alt||"",n=e.id||0,o=e.src||"",a=e.element||null;if(t.isNumeric(n)&&n>0)t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_sanitize_media_value",url:o,id:n},success:function(t){t.is_image||(o=t.type_icon),a.length&&a.html('<img src="'+o+'" alt="'+i+'">')}});else if(t.trim(o))return'<img src="'+o+'" alt="'+i+'">'},fansub.autoReloadPageNoActive=function(e,i){function n(){(new Date).getTime()-o>=e?window.location.reload(!0):setTimeout(n,i)}e=e||6e4,i=i||1e4;var o=(new Date).getTime();t(document.body).bind("mousemove keypress",function(){o=(new Date).getTime()}),setTimeout(n,i)},fansub.autoReloadPage=function(t){function e(){(new Date).getTime()-i>=t?window.location.reload(!0):setTimeout(e,1e3)}t=t||2e3;var i=(new Date).getTime();setTimeout(e,1e3)},fansub.debugLog=function(e){var i=JSON.stringify(e);t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_debug_log",object:i},success:function(t){}})},fansub.limitUploadFile=function(e){e.on("change",function(){var i=e.get(0).files.length,n=parseInt(e.attr("data-max")),o=this,a=e.next();if(t.isNumeric(n)||(n=-1),n>0&&i>n)return alert("Bạn không được chọn quá "+n+" tập tin."),e.val(""),!1;if(a.length&&(a.empty(),"undefined"!=typeof FileReader))for(var s=0;i>s;s++){var r=new FileReader,l=o.files.item(s).name;r.onload=function(e){var i=t("<img>",{src:e.target.result,"class":"thumb-image",alt:""}).attr("data-file-name",l);i.appendTo(a)},a.show(),r.readAsDataURL(e.get(0).files[s])}})},fansub.setCookie=function(t,e,i){var n=new Date;n.setTime(n.getTime()+60*i*1e3);var o,a="expires="+n.toGMTString();o=t+"="+e+"; "+a+"; path=/",document.cookie=o},fansub.iconChangeCaptchaExecute=function(){var e=t("img.fansub-captcha-reload"),i=t("img.fansub-captcha-image");return i.length?(i.css({cursor:"text"}),e.css({opacity:"0.75"}),e.on("mouseover",function(e){e.preventDefault(),t(this).css({opacity:"1"})}),e.on("mouseout mouseleave",function(e){e.preventDefault(),t(this).css({opacity:"0.75"})}),void e.on("click",function(e){e.preventDefault();var i=t(this),n=i.parent(),o=n.find("img.fansub-captcha-image");i.css({opacity:"0.25","pointer-events":"none"}),t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_change_captcha_image"},success:function(t){t.success?o.attr("src",t.captcha_image_url):alert(t.message),i.css({opacity:"0.75","pointer-events":"inherit"})}})})):!1},fansub.addDefaultQuicktagButton=function(){var t=e.find(".quicktags-toolbar");!e.hasClass("front-end")&&t.length&&"ed_toolbar"==t.attr("id")&&(QTags.addButton("hr","hr","\n<hr>\n","","h","Horizontal rule line",30),QTags.addButton("dl","dl","<dl>\n","</dl>\n\n","d","HTML Description List Element",100),QTags.addButton("dt","dt","	<dt>","</dt>\n","","HTML Definition Term Element",101),QTags.addButton("dd","dd","	<dd>","</dd>\n","","HTML Description Element",102))},fansub.formatNumber=function(e,i,n){n=n||" ₫",i=i||",";var o=e.toString(),a=".",s=o.split("."),r="";fansub.isArray(s)||(s=o.split(","),a=","),fansub.isArray(s)&&(o=s[0]);var l=parseInt(o.length),c=o.slice(-3);for(r+=l>3?i+c:c;l>3;)l-=3,o=o.slice(0,l),c=o.slice(-3),r=3>=l?c+r:i+c+r;return fansub.isArray(s)&&t.isNumeric(s[1])&&(r+=a+s[1]),r+=n,r=t.trim(r)},fansub.scrollToPosition=function(e,i){i=i||1e3,t("html, body").stop().animate({scrollTop:e},i)},fansub.goToTop=function(){return fansub.scrollToPosition(0),!1},fansub.scrollToTop=function(){fansub.goToTop()},fansub.isEmail=function(t){return this.test(t,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},fansub.isEmpty=function(t){return t.trim()},fansub.switcherAjax=function(){t(".fansub-switcher-ajax .icon-circle").on("click",function(e){e.preventDefault();var i=t(this),n="0.5";i.hasClass("icon-circle-success")&&(n="0.25"),i.css({opacity:n}),t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_switcher_ajax",post_id:i.attr("data-id"),value:i.attr("data-value"),key:i.attr("data-key")},success:function(t){t.success&&i.toggleClass("icon-circle-success"),i.css({opacity:"1"})}})})},fansub.chosenSelectUpdated=function(e){var i=e,n=i.chosen().val(),o=i.parent(),a=o.find(".chosen-result");if(null==n)return void a.val("");var s=[],r=null,l=null,c=0,h=n.length,d=!1;for(c;h>=c;c++){var u=n[c],p={value:u};l=o.find('option[value="'+u+'"]'),r=l.attr("data-taxonomy"),t.trim(r)&&(p.taxonomy=r,d=!0),s.push(p)}a.val(JSON.stringify(s))},fansub.mediaRemove=function(t,e,i,n,o){i.html(""),n.val(""),o.val(""),e.addClass("hidden"),t.removeClass("hidden")},fansub.mediaChange=function(t,e,i,n,o){fansub.isImageUrl(n.val())?i.html(fansub.createImageHTML({src:n.val(),id:o.val(),element:i})):i.html(""),o.val("")},fansub.mediaUpload=function(e,i){var n={title:fansub.i18n.insert_media_title,button_text:null,multiple:!1,remove:!1,change:!1};i=i||{},i=t.extend({},n,i);var o=e.parent(),a=o.find("input.media-url"),s=o.find("input.media-id"),r=o.find(".btn-remove"),l=o.find(".media-preview"),c=null;if(i.remove||i.change)i.remove&&fansub.mediaRemove(e,r,l,a,s);else{if(e.hasClass("selecting"))return;if(i.button_text||(i.multiple?i.button_text=fansub.i18n.insert_media_button_texts:i.button_text=fansub.i18n.insert_media_button_text),e.addClass("selecting"),c)return void c.open();c=wp.media({title:i.title,button:{text:i.button_text},multiple:i.multiple}),c.on("select",function(){var t=fansub.receiveSelectedMediaItems(c);if(!i.multiple){var n=fansub.getFirstMediaItemJSON(t);n.id&&s.val(n.id),n.url&&(a.val(n.url),l.html(fansub.createImageHTML({src:n.url,id:n.id,element:l})),e.addClass("hidden"),r.removeClass("hidden"))}e.removeClass("selecting")}),c.on("escape",function(){e.removeClass("selecting")}),c.open()}i.change&&fansub.mediaChange(e,r,l,a,s),a.on("change input",function(t){t.preventDefault(),fansub.mediaChange(e,r,l,a,s)}),r.on("click",function(t){t.preventDefault(),fansub.mediaRemove(e,r,l,a,s)})},fansub.sortableTermStop=function(e){var i=e.find(".input-result"),n=e.find(".connected-result"),o=[];return n.find("li").each(function(e,i){var n=t(i),a={id:n.attr("data-id"),taxonomy:n.attr("data-taxonomy")};o.push(a)}),o=JSON.stringify(o),i.val(o),o},fansub.sortablePostTypeStop=function(e){var i=e.find(".input-result"),n=e.find(".connected-result"),o=[];return n.find("li").each(function(e,i){var n=t(i),a={id:n.attr("data-id")};o.push(a)}),o=JSON.stringify(o),i.val(o),o},fansub.sortableTaxonomyStop=function(e){var i=e.find(".input-result"),n=e.find(".connected-result"),o=[];return n.find("li").each(function(e,i){var n=t(i),a={id:n.attr("data-id")};o.push(a)}),o=JSON.stringify(o),i.val(o),o},fansub.sortableStop=function(e,i){var n=i.find(".input-result"),o=[];return e.find("li").each(function(e,i){var n=t(i),a=n.attr("data-taxonomy"),s={id:n.attr("data-id")};"undefined"!=typeof a&&a!==!1&&(s.taxonomy=a),o.push(s)}),o=JSON.stringify(o),n.val(o),o},fansub.administrativeBoundaries=function(e,i,n){n=n||e.closest("form");var o=n,a=o.find("select[name="+i+"]"),s=a.find("option[value=0]"),r=e.attr("name");a.length&&(s.length||(s=a.find('option[value=""]')),t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_fetch_administrative_boundaries",parent:e.val(),taxonomy:"category",type:r,"default":s.prop("outerHTML")},success:function(t){a.html(t.html_data)}}))}}),jQuery(document).ready(function(t){function e(i,n){return this.self=this,this.$element=t(i),this.$element.length?(this.element=i,this.options=t.extend({},e.DEFAULTS,n),this.items=null,this.$container=this.$element.parent(),this.$id=this.$container.find("input.media-id"),this.$url=this.$container.find("input.media-url"),this.$preview=this.$container.find(".media-preview"),this.$remove=this.$container.find(".btn-remove"),this._defaults=e.DEFAULTS,this._name=e.NAME,this.frame=null,this.init(),this.$element.on("click",t.proxy(this.add,this)),this.$url.on("change input",t.proxy(this.change,this)),void this.$remove.on("click",t.proxy(this.remove,this))):this}e.NAME="fansub.mediaUpload",e.DEFAULTS={title:fansub.i18n.insert_media_title,button_text:null,multiple:!1},e.prototype.init=function(){this.options.button_text||(this.options.multiple?this.options.button_text=fansub.i18n.insert_media_button_texts:this.options.button_text=fansub.i18n.insert_media_button_text)},e.prototype.selected=function(){if(this.items=fansub.receiveSelectedMediaItems(this.frame),!this.options.multiple){var t=fansub.getFirstMediaItemJSON(this.items);t.id&&this.$id.val(t.id),t.url&&(this.$url.val(t.url),this.$preview.html(fansub.createImageHTML({src:t.url,id:t.id,element:this.$preview})),this.$element.addClass("hidden"),this.$remove.removeClass("hidden"))}this.$element.removeClass("selecting")},e.prototype.remove=function(t){t.preventDefault(),this.$preview.html(""),this.$url.val(""),this.$id.val(""),this.$remove.addClass("hidden"),this.$element.removeClass("hidden")},e.prototype.add=function(e){e.preventDefault();var i=this.$element;if(!this.$element.hasClass("selecting")){if(this.$element.addClass("selecting"),this.frame)return void this.frame.open();this.frame=wp.media({title:this.options.title,button:{text:this.options.button_text},multiple:this.options.multiple}),this.frame.on("select",t.proxy(this.selected,this)),this.frame.on("escape",function(){i.removeClass("selecting")}),this.frame.open()}},e.prototype.change=function(t){t.preventDefault(),fansub.isImageUrl(this.$url.val())?this.$preview.html(fansub.createImageHTML({src:this.$url.val(),id:this.$id.val(),element:this.$preview})):this.$preview.html(""),this.$id.val("")},t.fn.fansubMediaUpload=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(i,n){var o=t(window),a=o.scrollTop();if(this.self=this,this.$element=t(i),!this.$element.length)return this;this.element=i,this.options=t.extend({},e.DEFAULTS,n),this._defaults=e.DEFAULTS,this._name=e.NAME,this.init();var s=this.options.posToShow,r=this.$element;a>=s&&r.fadeIn(),o.scroll(function(){t(this).scrollTop()>=s?r.fadeIn():r.fadeOut()}),r.on("click",t.proxy(this.click,this))}e.NAME="fansub.scrollTop",e.DEFAULTS={posToShow:100},e.prototype.init=function(){},e.prototype.click=function(t){t.preventDefault(),fansub.scrollToTop()},t.fn.fansubScrollTop=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(i,n){if(this.self=this,this.$element=t(i),!this.$element.length)return this;if(this.element=i,this.options=t.extend({},e.DEFAULTS,n),this._defaults=e.DEFAULTS,this._name=e.NAME,!this.$element.hasClass("manage-column")){this.init();var o=this.$element,a=o.parent(),s=o.next(),r={placeholder:"ui-state-highlight",sort:function(e,i){var n=t(this),o=n.find(".ui-state-highlight");o.css({height:i.item.height()}),n.hasClass("display-inline")&&o.css({width:i.item.width()})},stop:function(){var t=a.find(".connected-result");t.length?t.hasClass("term-sortable")?fansub.sortableTermStop(a):t.hasClass("post-type-sortable")?fansub.sortablePostTypeStop(a):t.hasClass("taxonomy-sortable")&&fansub.sortableTaxonomyStop(a):fansub.sortableStop(o,a)}};if(s.length&&s.hasClass("sortable")){var l=o.height(),c=s.height();l>c&&s.css({height:l})}o.hasClass("connected-list")&&(r.connectWith=".connected-list"),o.sortable(r).disableSelection()}}e.NAME="fansub.sortableList",e.DEFAULTS={},e.prototype.init=function(){},t.fn.fansubSortable=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(i,n){function o(){l.removeClass("sf-menu sf-js-enabled"),l.find("li.menu-item-has-children").not(".appended").addClass("appended").append('<i class="fa fa-plus"></i>'),l.css({height:m}),l.show(),l.addClass(y),l.addClass("fansub-mobile-menu"),h.length||(c.append(fansub.mobile_menu_icon),h=c.find(".mobile-menu-button"),h.attr("aria-controls",l.attr("id"))),g||d.length&&!f||g||l.find("li.search-item").length&&!f||(l.prepend('<li class="search-item menu-item" style="overflow: hidden">'+fansub.search_form+"</li>"),g=!0),h.css({"line-height":p+"px"}),h.show(),c.off("click",".mobile-menu-button").on("click",".mobile-menu-button",function(t){t.stopPropagation(),l.toggleClass("active")}),s.on("click",function(){l.removeClass("active")}),c.off("click",".fansub-mobile-menu").on("click",".fansub-mobile-menu",function(t){t.stopPropagation(),t.target==this&&l.toggleClass("active")}),l.find(".search-field").on("click",function(t){t.preventDefault()}),s.hasClass("jquery-mobile")&&c.on("swipeleft",".fansub-mobile-menu",function(t){t.preventDefault(),l.removeClass("active")}),l.find("li.menu-item-has-children .fa").off("click").on("click",function(e){e.preventDefault();var i=t(this),n=i.parent(),o=n.children(".sub-menu");i.hasClass("active")?(o.stop(!0,!1,!0).slideUp(),i.removeClass("fa-minus"),i.addClass("fa-plus"),n.find(".fa-minus").each(function(){t(this).removeClass("fa-minus active").addClass("fa-plus")}),n.find(".sub-menu").not(o).hide()):(i.removeClass("fa-plus"),i.addClass("fa-minus"),o.stop(!0,!1,!0).slideDown()),i.toggleClass("active")}),a.scroll(function(){var e=t(this).scrollTop(),i=t("#wpadminbar"),n=0;i.length&&(n=i.height()),100>e&&(e=n),e==n?l.css({top:e+"px"}):l.css({top:"-"+e+"px"})})}var a=t(window),s=t("body"),r=a.width();if(this.self=this,this.$element=t(i),!this.$element.length)return this;this.element=i,this.options=t.extend({},e.DEFAULTS,n),this._defaults=e.DEFAULTS,this._name=e.NAME,this.init();var l=this.$element,c=l.parent(),h=c.find(".mobile-menu-button"),d=c.find(".search-form"),u=parseFloat(this.options.displayWidth),p=parseInt(this.options.height),m=s.height(),f=this.options.forceSearchForm,g=!1;this.element_class=l.attr("class"),this.html=l.html();var w=this.html,v=this.element_class,y=this.options.position,_=!1;return r>u?(_||a.on("resize",function(){_=!0,r=a.width(),r>u?l.hasClass("fansub-mobile-menu")&&(l.attr("class",v),l.attr("style",""),l.html(w),window.location.href=window.location.href):o()}),this):(u>=r&&o(),void(_||a.on("resize",function(){_=!0,r=a.width(),r>u?l.hasClass("fansub-mobile-menu")&&(l.attr("class",v),l.attr("style",""),l.html(w),window.location.href=window.location.href):o()})))}e.NAME="fansub.mobileMenu",e.DEFAULTS={displayWidth:980,position:"left",height:30,forceSearchForm:!1},e.prototype.init=function(){this.$element.is("ul")||(this.$element=this.$element.find("ul"))},e.prototype.click=function(t){t.preventDefault(),fansub.scrollToTop()},t.fn.fansubMobileMenu=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(i,n){if(this.self=this,this.$element=t(i),!this.$element.length)return this;this.element=i,this.options=t.extend({},e.DEFAULTS,n),this._defaults=e.DEFAULTS,this._name=e.NAME,this.multiple=this.$element.attr("multiple"),this.init();var o=this.$element,a=parseInt(this.$element.attr("data-loaded")),s={width:this.options.width||"100%"};1==a&&this.$element.parent().find(".chosen-container").remove(),"multiple"==this.multiple?this.$element.chosen(s).on("change",function(){fansub.chosenSelectUpdated(o)}):this.$element.chosen(s),this.$element.parent().find(".chosen-container").show()}e.NAME="fansub.chosenSelect",e.DEFAULTS={displayWidth:980,position:"left"},e.prototype.init=function(){var t=this.$element.parent(),e=t.next();e.hasClass("chosen-container")&&e.remove(),this.$element.addClass("fansub-chosen-select"),this.$element.attr("data-loaded",1)},t.fn.fansubChosenSelect=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(i,n){if(this.self=this,this.$element=t(i),!this.$element.length)return this;this.element=i,this.options=t.extend({},e.DEFAULTS,n),this._defaults=e.DEFAULTS,this._name=e.NAME,this.multiple=this.$element.attr("multiple"),this.init();var o=this.$element;o.raty(this.options)}e.NAME="fansub.postRating",e.DEFAULTS={score:function(){return t(this).attr("data-score")},path:function(){return this.getAttribute("data-path")},number:parseInt(t(this).attr("data-number")),numberMax:parseInt(t(this).attr("data-number-max")),readOnly:function(){var e=parseInt(t(this).attr("data-readonly"));return 1==e},click:function(e,i){var n=t(this),o=parseInt(this.getAttribute("data-id"));t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_rate_post",post_id:o,score:e,number:n.attr("data-number"),number_max:n.attr("data-number-max")},success:function(t){if(t.success){var i=parseInt(n.attr("data-refresh"));1==i?n.attr("data-score",t.score):n.attr("data-score",e),n.attr("data-readonly",1),n.raty(options)}}})}},e.prototype.init=function(){},t.fn.fansubPostRating=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){function e(n,o){if(this.self=this,this.$element=t(n),!this.$element.length||!i.hasClass("fansub-google-maps"))return this;this.element=n,this.options=t.extend({},e.DEFAULTS,o),this._defaults=e.DEFAULTS,this._name=e.NAME,this.init();var a=this.$element,s=i.find("#google_maps"),r=i.find(".fansub-geo-address"),l=i.find("select[name=province]"),c=t(".classifieds.fansub-google-maps #categorychecklist"),h=new google.maps.LatLng(a.attr("data-lat"),a.attr("data-long")),d={zoom:parseInt(a.attr("data-zoom")),center:h,scrollwheel:a.attr("data-scrollwheel")},u=new google.maps.Map(document.getElementById(a.attr("id")),d),p=new google.maps.Marker({position:h,map:u,draggable:!0,title:a.attr("data-marker-title")}),m=p.getPosition();google.maps.event.addListener(p,"dragend",function(t){m=p.getPosition(),u.panTo(m),s.length&&s.val(JSON.stringify(m)),a.attr("data-lat",m.lat),a.attr("data-long",m.lng)});var f=new google.maps.Geocoder;if(r.length&&r.on("change",function(e){e.preventDefault(),t.trim(r.val())&&(null==f&&(f=new google.maps.Geocoder),f.geocode({address:r.val()},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].geometry.bounds;i&&(u.fitBounds(i),u.setZoom(14),h=new google.maps.LatLng(t[0].geometry.location.lat(),t[0].geometry.location.lng()),p.setPosition(h),m=p.getPosition(),s.length&&s.val(JSON.stringify(m)),u.setCenter(m),google.maps.event.addListener(p,"dragend",function(t){m=p.getPosition(),u.panTo(m),s.length&&s.val(JSON.stringify(m)),a.attr("data-lat",m.lat),a.attr("data-long",m.lng)}))}}))}),c.length&&c.find('input[type="checkbox"]').on("change",function(e){e.preventDefault();var i=t(this);i.is(":checked")&&(null==f&&(f=new google.maps.Geocoder),t.trim(r.val())||t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_get_term_administrative_boundaries_address",term_id:i.val(),taxonomy:"category"},success:function(e){t.trim(e.address)&&f.geocode({address:e.address},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].geometry.bounds;i&&(u.fitBounds(i),u.setZoom(14),h=new google.maps.LatLng(t[0].geometry.location.lat(),t[0].geometry.location.lng()),p.setPosition(h),m=p.getPosition(),s.length&&s.val(JSON.stringify(m)),u.setCenter(m),google.maps.event.addListener(p,"dragend",function(t){m=p.getPosition(),u.panTo(m),s.length&&s.val(JSON.stringify(m)),a.attr("data-lat",m.lat),a.attr("data-long",m.lng)}))}})}}))}),l.length){var g=i.find("select[name=district]"),w=i.find("select[name=ward]"),v=i.find("select[name=street]");l.add(g).add(w).add(v).on("change",function(e){e.preventDefault();var i=t(this).val();t.isNumeric(i)&&i>0&&(null==f&&(f=new google.maps.Geocoder),t.trim(r.val())||t.ajax({type:"POST",dataType:"json",url:fansub.ajax_url,data:{action:"fansub_get_term_administrative_boundaries_address",term_id:i,taxonomy:"category"},success:function(e){t.trim(e.address)&&f.geocode({address:e.address},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].geometry.bounds;i&&(u.fitBounds(i),u.setZoom(14),h=new google.maps.LatLng(t[0].geometry.location.lat(),t[0].geometry.location.lng()),p.setPosition(h),m=p.getPosition(),s.length&&s.val(JSON.stringify(m)),u.setCenter(m),google.maps.event.addListener(p,"dragend",function(t){m=p.getPosition(),u.panTo(m),s.length&&s.val(JSON.stringify(m)),a.attr("data-lat",m.lat),a.attr("data-long",m.lng)}))}})}}))})}}var i=t("body");e.NAME="fansub.googleMaps",e.DEFAULTS={},e.prototype.init=function(){},t.fn.fansubGoogleMaps=function(i){return this.each(function(){t.data(this,e.NAME)||t.data(this,e.NAME,new e(this,i))})}}),jQuery(document).ready(function(t){t.fn.fansubShow=function(e,i){var n=t(this);i=i||!1,e?i?n.addClass("active").fadeIn():n.addClass("active").show():i?n.removeClass("active").fadeOut():n.removeClass("active").hide()},t.fn.fansubExternalLinkFilter=function(){var e=t(this);e.filter(function(){return this.hostname&&this.hostname!==location.hostname}).addClass("external")}}),jQuery(document).ready(function(t){!function(){t(".btn-insert-media").fansubMediaUpload()}(),function(){t(".fansub-geo-address").on("input",function(){t(this).addClass("user-type-address"),t(this).attr("data-user-type",1)})}()});